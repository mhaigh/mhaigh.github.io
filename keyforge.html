<!DOCTYPE html>

<html lang="en">



<head>

    <!-- Meta Tag -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- SEO -->
    <meta name="description" content="PhD Student, Imperial College London">
    <meta name="author" content="Michael Haigh">
    <meta name="url" content="https://mhaigh.github.io/">
    <meta name="robots" content="index,follow">


    <title>Michael Haigh</title>

    <!-- Favicon -->
    <!-- <link rel="shortcut icon" href="images/favicon/favicon.ico">
    <link rel="apple-touch-icon" sizes="144x144" type="image/x-icon" href="images/favicon/apple-touch-icon.png"> -->

    <!-- All CSS Plugins -->
    <link rel="stylesheet" type="text/css" href="plugin.css">

    <!-- Main CSS Stylesheet -->
    <link rel="stylesheet" type="text/css" href="style.css">

	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"> </script>

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">

	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>





</head>



<body onload="makeTable('winDiff')">

<div align="center">
<h3> Keyforge Tracker </h3>
</div> <br>

<div class="container" id="test">
<select name="order" onchange="makeTable(this.value)">
	<option value="winDiff" selected="selected">winDiff</option>
	<option value="winPcnt">win %</option>
</select>
</div>

<div class="container">
<table id="Table1" class="table table-striped" width="400">

	<thead>
		<th> </th>
		<th title="Decks">Deck</th>
		<th title="Wins">Wins</th>
		<th title="Losses">Losses</th>
		<th title="win difference">Win difference</th>
		<th title="Win ratio">Win ratio</th>
		<th title="Opponent average SAS">OASAS</th>
	</thead>

	<tbody id="tableBody">
	</tbody>

</table>
</div>




<script>
$.ajaxSetup({beforeSend: function(xhr){
  if (xhr.overrideMimeType)
  {
    xhr.overrideMimeType("application/json");
  }
}
});
</script>



<script>

//$.getJSON("data/order.json")

function makeTable(order){

document.getElementById("tableBody").innerHTML = "";

// Get file.
if (order == "winDiff"){
	var file = "data/decks_winDiff.json";
}
else{
	var file = "data/decks_winPcnt.json";
}

$.getJSON( file, function( data ) {
	var pos = 1;
	$.each(data, function(data, val) {
		var tblRow = "<tr>" + "<td>" + pos + "</td>" + "<td id=pos" + pos + ">" + "<a href="+val["url"]+" target='_blank'>" + val["longName"] + "</a>" + "</td>" +
						"<td>" + val["wins"] + "</td>" + "<td>" + val["losses"] + "</td>" + "<td>" + String(Number(val["wins"]) - Number(val["losses"])) + "</td>" 
						+ "<td>" + parseFloat(val["win%"]).toFixed(2) + "</td>" + "<td>" + val["OASAS"] + "</td>" + "</tr>"

		pos += 1;
		$(tblRow).appendTo("#Table1")
	});
});
return true;
}

$.getJSON( "data/decks_winDiff.json", function( data ) {
	var pos = 1;
	$.each(data, function(val) {

});
});


</script>


</body>
